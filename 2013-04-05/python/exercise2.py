GRID = COMP([INSR(PROD),AA(QUOTE)])

#se copio/incollo su pyplasm non funziona, devo scrivere le funzioni riga per riga

def circle (r):
	def circ (p):
		return ([r*COS(p[0]),r*SIN(p[0])])
	return circ

dom = INTERVALS(PI)(36)

def ring(r,R):
	def circle (r):
		def c(p):
			return [r*math.cos(p[0]),r*math.sin(p[0])]
		return c
	esterno = MAP(circle(R))(dom)
	interno = MAP(circle(r))(dom)	
return STRUCT([esterno,interno])

# pareti circolari

semicircle12D = R([1,2])(PI)(SOLIDIFY(MAP(circle(0.625))(dom)))
semicircle13D = T([1,2,3])([2.125,1.775,0.04])(PROD([semicircle12D,Q(0.1)]))
semicircle22D = R([1,2])(3*PI/2)(SOLIDIFY(MAP(circle(1.425))(dom)))
semicircle23D = T([1,2,3])([8.825,5.425,0.04])(PROD([semicircle22D,Q(0.1)]))


###### ground floor ###################################################################################################

step = GRID([[0.5],[-5.25,1.6],[0.14]])

floor00 = GRID([[11.25],[6.85],[0.04]])

floor012D = SOLIDIFY(POLYLINE([[0,5.25],[0,6.85],[8.825,6.85],[8.825,4],[8.65,4],[8.65,2.15],[2.75,2.15],[2.75,1.775],
							[1.5,1.775],[1.5,5.25],[0,5.25]]))

floor013D = PROD([floor012D,Q(0.1)])

floor0 = STRUCT([floor00, T([3])([0.04])(floor013D),T([1])([-0.5])(step),semicircle13D,semicircle23D])

############# wall ground floor #################################

wall01 = POLYLINE([[1.5,1.775],[1.5,5.25],[0,5.25],[0,6.85],[8.825,6.85]])
wall02 = POLYLINE([[8.825,4],[8.65,4],[8.65,2.15],[2.75,2.15],[2.75,1.775]])
solidRing03 = SOLIDIFY(ring(0.62,0.625))
wall03 = T([1,2,3])([2.125,1.775,0.04])(R([1,2])(PI)(PROD([solidRing03,Q(2.5)])))
solidRing04 = SOLIDIFY(ring(1.42,1.425))
wall04 = T([1,2,3])([8.825,5.425,0.04])(R([1,2])(3*PI/2)(PROD([solidRing04,Q(2.5)])))

wall0123D = PROD([STRUCT([wall01,wall02]),Q(2.5)])
wall033D = PROD([wall03,Q(2.5)])

wall0 = STRUCT([wall0123D,wall03,wall04]) 
VIEW(wall0)

###############################################################

############# first floor ##############################################################################################

floor12D = SOLIDIFY(POLYLINE([[0,0],[0,5.4],[-1.35,5.4],[-1.35,6.7],[0,6.7],[0,6.85],[3,6.85],
							[3,5.5],[6,5.5],[6,6.6],[3,6.6],[3,6.85],[11.25,6.85],[11.25,0],[0,0]]))

floor1 = PROD([floor12D,Q(0.14)])

############# second floor ##############################################################################################

floor22D = SOLIDIFY(POLYLINE([[0,0],[0,6.85],[0.95,6.85],[0.95,6.6],[0.95,5.5],[4.6,5.5],[4.6,6.6],[0.95,6.6],[0.95,6.85],
						[11.25,6.85],[11.25,0],[5.5,0],[5.5,0.25],[4.6,5.35],[0.85,5.35],[0.85,0.25],[5.5,0.25],[5.5,0],[0,0]]))

floor2 = PROD([floor22D,Q(0.14)])

############ third floor ###################################################################################################

floor32D = SOLIDIFY(POLYLINE([[0,0],[0,6.85],[5.75,6.85],[5.75,6.6],[5.75,5.5],[9,5.5],[9,6.6],[5.75,6.6],[5.75,6.85],
							[11.25,6.85],[11.25,0],[0,0]]))

floor3 = PROD([floor32D,Q(0.14)])

########### forth floor ####################################################################################################

floor42D = SOLIDIFY(POLYLINE([[0,0],[0,6.85],[11.25,6.85],[11.25,0],[5.5,0],[5.5,0.25],[5.5,5.25],[0.25,5.25],[0.25,0.25],
							[5.5,0.25],[5.5,0],[0,0]]))

floor4 = PROD([floor42D,Q(0.14)])

############################################################################################################################


building2 = STRUCT([floor0,T([3])([2.5])(floor1),T([3])([5])(floor2),T([3])([7.5])(floor3),T([3])([10])(floor4),wall0])



